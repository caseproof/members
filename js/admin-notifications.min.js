jQuery(document).ready(function(r){r("#membersAdminHeaderNotifications").on("click",function(e){e.preventDefault(),r("#members-notifications").toggleClass("visible"),r("#caseproofFlyoutButton").trigger("click")}),r("#membersNotificationsClose").on("click",function(e){e.preventDefault(),r("#members-notifications").removeClass("visible")});var i=r("#viewDismissed"),s=r("#viewActive"),l=r(".dismissed-messages"),n=r(".active-messages");i.on("click",function(e){e.preventDefault(),l.show(),n.hide(),s.show(),i.hide()}),s.on("click",function(e){e.preventDefault(),l.hide(),n.show(),s.hide(),i.show()}),r("body").on("click",".members-notice-dismiss",function(e){e.preventDefault();var i=r(this),s=i.data("message-id"),n=r("#members-notifications-message-"+s),o=r("#membersAdminMenuUnreadCount"),t=r("#membersAdminHeaderNotificationsCount"),a=r("#membersNotificationsCountTray"),m=parseInt(t.html()),d=r("#membersAdminMenuUnreadCount"),c={action:"members_notification_dismiss",nonce:MembersAdminNotifications.nonce,id:s};i.prop("disabled","disabled"),n.fadeOut(),r.post(MembersAdminNotifications.ajax_url,c,function(e){e.success?(n.prependTo(l),n.show(),--m<0?(m=0,o.hide(),t.hide(),a.hide(),d.closest(".awaiting-mod").remove()):0==m?(o.hide(),t.hide(),a.hide(),r(".members-notifications-none").show(),r(".dismiss-all").hide(),d.closest(".awaiting-mod").remove()):(m<10&&o.addClass("single-digit"),o.html("("+m+")"),t.html(m),a.html(m),d.html(m))):console.debug(e)}).fail(function(e,i,s){console.debug(e.responseText),n.show("Message could not be dismissed.")})}),r("body").on("click",".dismiss-all",function(e){e.preventDefault();var i=r(this),s=r("#membersAdminHeaderNotificationsCount"),n=r("#membersNotificationsCountTray"),o=(parseInt(s.html()),r("#membersAdminMenuUnreadCount")),t={action:"members_notification_dismiss",nonce:MembersAdminNotifications.nonce,id:"all"};i.prop("disabled","disabled"),r.post(MembersAdminNotifications.ajax_url,t,function(e){e.success?(s.hide(),n.hide(),o.closest(".awaiting-mod").remove(),r(".members-notifications-none").show(),r(".dismiss-all").hide(),r.each(r(".active-messages .members-notifications-message"),function(e,i){r(i).appendTo(l)})):console.debug(e)}).fail(function(e,i,s){console.debug(e.responseText),message.show("Messages could not be dismissed.")})})});